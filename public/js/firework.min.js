function resetFirework(e){e.x=Math.floor(Math.random()*canvas.width),e.y=canvas.height,e.age=0,e.phase="fly"}function explode(){context.clearRect(0,0,canvas.width,canvas.height),fireworks.forEach((e,o)=>{if("explode"==e.phase){if(e.sparks.forEach(o=>{for(let t=0;t<10;t++){let r=e.age+t,a=e.x+o.vx*r,n=e.y+o.vy*r+o.weight*r*o.weight*r,i=20*t-2*e.age,l=Math.floor(o.red*i),d=Math.floor(o.green*i),h=Math.floor(o.blue*i);context.beginPath(),context.fillStyle="rgba("+l+","+d+","+h+",1)",context.rect(a,n,2,2),context.fill()}}),e.age++,e.age>100&&Math.random()<.05){resetFirework(e);let o=Math.floor(2*Math.random()),t=flySound[o].cloneNode(!1);t.play()}}else{e.y=e.y-10;for(let t=0;t<15;t++)context.beginPath(),context.fillStyle="rgba("+50*o+","+17*t+",0,1)",context.rect(e.x+Math.random()*t-t/2,e.y+4*t,4,4),context.fill();if(Math.random()<.001||e.y<200){e.phase="explode";let o=Math.floor(3*Math.random()),t=burstSound[o].cloneNode(!1);t.play()}}}),window.requestAnimationFrame(explode)}export const max_fireworks=2,max_sparks=80;let canvas=document.getElementById("firework-2-canvas");canvas.width=window.innerWidth,canvas.height=window.innerHeight;let context=canvas.getContext("2d"),fireworks=[];const flySound=[],burstSound=[];flySound[0]=new Audio("../firework/Rocket-Fly-By-1.wav"),flySound[1]=new Audio("../firework/Rocket-Fly-By-2.wav"),flySound[2]=new Audio("../firework/Rocket-Fly-By-3.wav"),burstSound[0]=new Audio("../firework/Mortar-Burst-1.wav"),burstSound[1]=new Audio("../firework/Mortar-Burst-2.wav"),burstSound[2]=new Audio("../firework/Mortar-Burst-3.wav"),burstSound[3]=new Audio("../firework/Mortar-Burst-4.wav");export function happynewyear(){for(let e=0;e<max_fireworks;e++){let e={sparks:[]};for(let o=0;o<max_sparks;o++){let o={vx:5*Math.random()+.5,vy:5*Math.random()+.5,weight:.3*Math.random()+.03,red:Math.floor(2*Math.random()),green:Math.floor(2*Math.random()),blue:Math.floor(2*Math.random())};Math.random()>.5&&(o.vx=-o.vx),Math.random()>.5&&(o.vy=-o.vy),e.sparks.push(o)}fireworks.push(e),resetFirework(e)}window.requestAnimationFrame(explode)}